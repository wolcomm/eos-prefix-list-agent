<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Agent - EOS Prefix List Agent</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../about/index.html"><strong aria-hidden="true">1.</strong> About</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../about/background.html"><strong aria-hidden="true">1.1.</strong> Background</a></li><li class="chapter-item expanded "><a href="../about/implementation.html"><strong aria-hidden="true">1.2.</strong> Implementation</a></li></ol></li><li class="chapter-item expanded "><a href="../install/index.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../config/index.html"><strong aria-hidden="true">3.</strong> Configuration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../config/agent.html" class="active"><strong aria-hidden="true">3.1.</strong> Agent</a></li><li class="chapter-item expanded "><a href="../config/prefix-lists.html"><strong aria-hidden="true">3.2.</strong> Prefix lists</a></li><li class="chapter-item expanded "><a href="../config/tracing.html"><strong aria-hidden="true">3.3.</strong> Tracing</a></li></ol></li><li class="chapter-item expanded "><a href="../ops/index.html"><strong aria-hidden="true">4.</strong> Operations</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">EOS Prefix List Agent</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/wolcomm/eos-prefix-list-agent" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/wolcomm/eos-prefix-list-agent/edit/master/src/config/agent.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="agent-configuration"><a class="header" href="#agent-configuration">Agent Configuration</a></h1>
<p>The EOS Prefix List Agent is configured via a custom CLI extension providing
the <code>prefix-list-agent</code> configuration sub-mode.</p>
<p>The legacy <code>daemon</code> CLI syntax should still work, but is unsupported and
untested as of <code>0.2.0</code>.</p>
<h2 id="synopsis"><a class="header" href="#synopsis">Synopsis</a></h2>
<pre><code class="language-eos">prefix-list-agent
   [no] disabled                #  Enable/disable the agent (default: disabled)
   rptk-endpoint &lt;URL&gt;          #  RPTK Web API endpoint URL (required)
   source-directory &lt;PATH&gt;      #  Filesystem path to write to (default: /tmp/prefix-lists)
   refresh-interval &lt;10-86400&gt;  #  Seconds between update runs (default: 3600)
   update-delay &lt;1-120&gt;         #  Optional delay between prefix-list refreshes (default: none)
</code></pre>
<h2 id="command-reference"><a class="header" href="#command-reference">Command Reference</a></h2>
<h3 id="no-disabled"><a class="header" href="#no-disabled"><code>[no] disabled</code></a></h3>
<p>Control whether the agent is enabled or disabled, i.e. should be started by
EOS <code>ProcMgr</code>.</p>
<p>The agent is disabled by default. Configure <code>no disabled</code> to start it.</p>
<p>Default: <code>disabled</code></p>
<h3 id="rptk-endpoint-url"><a class="header" href="#rptk-endpoint-url"><code>rptk-endpoint &lt;URL&gt;</code></a></h3>
<p>The URL of an instance of the <a href="https://github.com/wolcomm/rptk">RPTK</a> Web API service.</p>
<p>The agent does not communicate directly with an IRR mirror using the <code>tcp/43</code>
protocol(s). Instead an instance of <a href="https://github.com/wolcomm/rptk">RPTK</a> is used to resolve IRR object names
to prefix sets.</p>
<p>The option is required in order for the agent to function. If it is not
provided then the agent when an update run begins then an error is logged, and
the agent restarts its <code>refresh-interval</code> timer and waits for the next run.</p>
<p>Default: none (required)</p>
<h3 id="source-directory-path"><a class="header" href="#source-directory-path"><code>source-directory &lt;PATH&gt;</code></a></h3>
<p>The path on the local filesystem to the directory where the agent should write
the contents of prefix-lists.</p>
<p>The default path is on a <code>tmpfs</code> filesystem, meaning that the contents of the
prefix-lists will not persist across reloads. To change this behaviour,
configure a directory path on a filesystem that is backed by a real block
device (e.g. <code>/mnt/flash</code> or <code>/mnt/disk</code>).</p>
<p>Default: <code>/tmp/prefix-lists</code></p>
<h3 id="refresh-interval-10-86400"><a class="header" href="#refresh-interval-10-86400"><code>refresh-interval &lt;10-86400&gt;</code></a></h3>
<p>The interval (in seconds) between prefix list contents update runs.</p>
<p>The timer is reset at the <em>end</em> of each run, so the interval excludes however
much time is taken to perform the update itself. Similarly, and change in the
configuration will take effect at the end of the next (currently scheduled)
run.</p>
<p>Default: <code>3600</code></p>
<h3 id="update-delay-1-120"><a class="header" href="#update-delay-1-120"><code>update-delay &lt;1-120&gt;</code></a></h3>
<p>Tell EOS to re-read the prefix-list content sources one-at-a-time, and
introduce a delay (in seconds) between each.</p>
<p>When not configured, all prefix-lists are re-read simultaneously. On affected
EOS versions, bug <a href="https://www.arista.com/en/support/software-bug-portal/bugdetail?bug_id=578037">578037</a> can cause the <code>IsIs</code> and/or <code>Ospf</code> agents to crash
if the prefix-lists being managed are large enough. Using <code>update-delay</code> can
dampen the effect and avoid this issue.</p>
<p>Default: <code>none</code></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../config/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../config/prefix-lists.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../config/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../config/prefix-lists.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
